{"ast":null,"code":"var _jsxFileName = \"/Users/safahi/Documents/GitHub/sybil-interf/src/components/governance/ProposalDetails.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { useProposalData, useActiveProtocol, useProposalStatus, useUserVotes } from '../../state/governance/hooks';\nimport ReactMarkdown from 'react-markdown';\nimport { RowBetween, RowFixed } from '../Row';\nimport { AutoColumn } from '../Column';\nimport { TYPE, ExternalLink } from '../../theme';\nimport { ChevronRight } from 'react-feather';\nimport { ProposalStatus } from './styled';\nimport { DateTime } from 'luxon';\nimport { AVERAGE_BLOCK_TIME_IN_SECS, BIG_INT_ZERO } from '../../constants';\nimport { isAddress, getEtherscanLink } from '../../utils';\nimport { useActiveWeb3React } from '../../hooks';\nimport VoterList from './VoterList';\nimport VoteModal from '../vote/VoteModal';\nimport { withRouter } from 'react-router-dom';\nimport { BodyWrapper } from '../../pages/AppBody';\nimport { useDispatch } from 'react-redux';\nimport { SUPPORTED_PROTOCOLS } from '../../state/governance/reducer';\nimport useCurrentBlockTimestamp from '../../hooks/useCurrentBlockTimestamp';\nimport { ApplicationModal } from '../../state/application/actions';\nimport { useBlockNumber, useModalOpen, useToggleModal } from '../../state/application/hooks';\nimport { BigNumber } from 'ethers';\nimport { nameOrAddress } from '../../utils/getName';\nimport { useAllIdentities } from '../../state/social/hooks';\nimport { ButtonError } from '../../components/Button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Wrapper = styled.div``;\n_c = Wrapper;\nconst ProposalInfo = styled(AutoColumn)`\n  border-radius: 12px;\n  position: relative;\n`;\n_c2 = ProposalInfo;\nconst ArrowWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: ${({\n  theme\n}) => theme.text1};\n\n  a {\n    color: ${({\n  theme\n}) => theme.text1};\n    text-decoration: none;\n  }\n  :hover {\n    text-decoration: none;\n    cursor: pointer;\n  }\n`;\n_c3 = ArrowWrapper;\nconst CardWrapper = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n  width: 100%;\n\n  ${({\n  theme\n}) => theme.mediaWidth.upToSmall`\n    grid-template-columns: 1fr;\n    margin: 0;\n    padding: 0;\n  `};\n`;\n_c4 = CardWrapper;\nexport const CardSection = styled(AutoColumn)`\n  padding: 1rem;\n  z-index: 1;\n  opacity: ${({\n  disabled\n}) => disabled && '0.4'};\n`;\nconst DetailText = styled.div`\n  word-break: break-all;\n`;\n_c5 = DetailText;\nconst MarkDownWrapper = styled.div`\n  overflow: scroll;\n\n  ${({\n  theme\n}) => theme.mediaWidth.upToSmall`\n    max-width: 400px;\n  `};\n`;\n_c6 = MarkDownWrapper;\nconst AddressWrapper = styled.div`\n  ${({\n  theme\n}) => theme.mediaWidth.upToSmall`\n    max-width: 300px;\n  `};\n`;\n_c7 = AddressWrapper;\n\nfunction ProposalDetails({\n  match: {\n    params: {\n      protocolID,\n      proposalID\n    }\n  },\n  history\n}) {\n  _s();\n\n  var _Object$keys, _Object$keys2, _proposalData$details;\n\n  const {\n    chainId\n  } = useActiveWeb3React(); // if valid protocol id passed in, update global active protocol\n\n  const dispatch = useDispatch();\n  const [, setActiveProtocol] = useActiveProtocol();\n  useEffect(() => {\n    if (protocolID && Object.keys(SUPPORTED_PROTOCOLS).includes(protocolID)) {\n      setActiveProtocol(SUPPORTED_PROTOCOLS[protocolID]);\n    }\n  }, [dispatch, protocolID, setActiveProtocol]);\n  const proposalData = useProposalData(proposalID);\n  const status = useProposalStatus(proposalID); // @TODO shoudlnt use spearate data for this\n  // get and format data\n\n  const currentTimestamp = useCurrentBlockTimestamp();\n  const currentBlock = useBlockNumber();\n  const endDate = proposalData && currentTimestamp && currentBlock ? DateTime.fromSeconds(currentTimestamp.add(BigNumber.from(AVERAGE_BLOCK_TIME_IN_SECS).mul(BigNumber.from(proposalData.endBlock - currentBlock))).toNumber()) : undefined;\n  const now = DateTime.local(); // get total votes and format percentages for UI\n\n  const totalVotes = (proposalData === null || proposalData === void 0 ? void 0 : proposalData.forCount) !== undefined && (proposalData === null || proposalData === void 0 ? void 0 : proposalData.againstCount) !== undefined ? proposalData.forCount + proposalData.againstCount : undefined;\n  const forPercentage = (proposalData === null || proposalData === void 0 ? void 0 : proposalData.forCount) !== undefined && totalVotes ? (proposalData.forCount * 100 / totalVotes).toFixed(0) + '%' : '0%';\n  const againstPercentage = (proposalData === null || proposalData === void 0 ? void 0 : proposalData.againstCount) !== undefined && totalVotes ? (proposalData.againstCount * 100 / totalVotes).toFixed(0) + '%' : '0%';\n  const [allIdentities] = useAllIdentities(); // show links in propsoal details if content is an address\n\n  const linkIfAddress = content => {\n    if (isAddress(content) && chainId) {\n      return /*#__PURE__*/_jsxDEV(ExternalLink, {\n        href: getEtherscanLink(chainId, content, 'address'),\n        children: nameOrAddress(content, allIdentities)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      children: nameOrAddress(content, allIdentities)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 12\n    }, this);\n  };\n\n  const [support, setSupport] = useState(false);\n  const toggleVoteModal = useToggleModal(ApplicationModal.VOTE);\n  const voteModalOpen = useModalOpen(ApplicationModal.VOTE);\n  const voteModelToggle = useToggleModal(ApplicationModal.VOTE);\n  const userAvailableVotes = useUserVotes(); // only show voting if user has > 0 votes at proposal start block and proposal is active,\n\n  const showVotingButtons = userAvailableVotes && userAvailableVotes.greaterThan(BIG_INT_ZERO) && proposalData && proposalData.status === 'active';\n  return /*#__PURE__*/_jsxDEV(BodyWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(VoteModal, {\n      isOpen: voteModalOpen,\n      onDismiss: voteModelToggle,\n      support: support,\n      proposalId: proposalID,\n      proposalTitle: proposalData === null || proposalData === void 0 ? void 0 : proposalData.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Wrapper, {\n      children: /*#__PURE__*/_jsxDEV(ProposalInfo, {\n        gap: \"lg\",\n        justify: \"start\",\n        children: [/*#__PURE__*/_jsxDEV(RowBetween, {\n          style: {\n            width: '100%',\n            alignItems: 'flex-start'\n          },\n          children: [/*#__PURE__*/_jsxDEV(RowFixed, {\n            children: [/*#__PURE__*/_jsxDEV(ArrowWrapper, {\n              onClick: () => {\n                (history === null || history === void 0 ? void 0 : history.length) === 1 ? history.push('/') : history.goBack();\n              },\n              style: {\n                alignItems: 'flex-start'\n              },\n              children: /*#__PURE__*/_jsxDEV(TYPE.body, {\n                fontWeight: \"600\",\n                children: \"Proposals\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ChevronRight, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TYPE.body, {\n              children: 'Proposal #' + proposalID\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), proposalData && /*#__PURE__*/_jsxDEV(ProposalStatus, {\n            status: status !== null && status !== void 0 ? status : '',\n            children: status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n          gap: \"10px\",\n          style: {\n            width: '100%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(TYPE.largeHeader, {\n            style: {\n              marginBottom: '.5rem'\n            },\n            children: proposalData === null || proposalData === void 0 ? void 0 : proposalData.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(RowBetween, {\n            children: /*#__PURE__*/_jsxDEV(TYPE.main, {\n              children: endDate && endDate < now ? 'Voting ended ' + (endDate && endDate.toLocaleString(DateTime.DATETIME_FULL)) : proposalData ? 'Voting ends approximately ' + (endDate && endDate.toLocaleString(DateTime.DATETIME_FULL)) : ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardWrapper, {\n          children: [proposalData && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(VoterList, {\n              title: \"For\",\n              amount: proposalData === null || proposalData === void 0 ? void 0 : proposalData.forCount,\n              percentage: forPercentage,\n              voters: proposalData === null || proposalData === void 0 ? void 0 : proposalData.forVotes.slice(0, Math.min(10, (_Object$keys = Object.keys(proposalData === null || proposalData === void 0 ? void 0 : proposalData.forVotes)) === null || _Object$keys === void 0 ? void 0 : _Object$keys.length)),\n              support: \"for\",\n              id: proposalData === null || proposalData === void 0 ? void 0 : proposalData.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(VoterList, {\n              title: \"Against\",\n              amount: proposalData === null || proposalData === void 0 ? void 0 : proposalData.againstCount,\n              percentage: againstPercentage,\n              voters: proposalData === null || proposalData === void 0 ? void 0 : proposalData.againstVotes.slice(0, Math.min(10, (_Object$keys2 = Object.keys(proposalData === null || proposalData === void 0 ? void 0 : proposalData.againstVotes)) === null || _Object$keys2 === void 0 ? void 0 : _Object$keys2.length)),\n              support: 'against',\n              id: proposalData === null || proposalData === void 0 ? void 0 : proposalData.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true), showVotingButtons && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(ButtonError, {\n              style: {\n                flexGrow: 1,\n                fontSize: 16,\n                padding: '8px 12px',\n                width: 'unset'\n              },\n              onClick: () => {\n                setSupport(true);\n                toggleVoteModal();\n              },\n              children: \"Support Proposal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ButtonError, {\n              error: true,\n              style: {\n                flexGrow: 1,\n                fontSize: 16,\n                padding: '8px 12px',\n                width: 'unset'\n              },\n              onClick: () => {\n                setSupport(false);\n                toggleVoteModal();\n              },\n              children: \"Reject Proposal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n          gap: \"md\",\n          children: [/*#__PURE__*/_jsxDEV(TYPE.mediumHeader, {\n            fontWeight: 600,\n            children: \"Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this), proposalData === null || proposalData === void 0 ? void 0 : (_proposalData$details = proposalData.details) === null || _proposalData$details === void 0 ? void 0 : _proposalData$details.map((d, i) => {\n            return /*#__PURE__*/_jsxDEV(DetailText, {\n              children: [i + 1, \": \", linkIfAddress(d.target), \".\", d.functionSig, \"(\", d.callData.split(',').map((content, i) => {\n                return /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [linkIfAddress(content), d.callData.split(',').length - 1 === i ? '' : ',']\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 23\n                }, this);\n              }), \")\"]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n          gap: \"md\",\n          children: /*#__PURE__*/_jsxDEV(MarkDownWrapper, {\n            children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              source: proposalData === null || proposalData === void 0 ? void 0 : proposalData.description,\n              disallowedTypes: ['code']\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n          gap: \"md\",\n          children: [/*#__PURE__*/_jsxDEV(TYPE.mediumHeader, {\n            fontWeight: 600,\n            children: \"Proposer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AddressWrapper, {\n            children: /*#__PURE__*/_jsxDEV(ExternalLink, {\n              href: (proposalData === null || proposalData === void 0 ? void 0 : proposalData.proposer) && chainId ? getEtherscanLink(chainId, proposalData === null || proposalData === void 0 ? void 0 : proposalData.proposer, 'address') : '',\n              style: {\n                wordWrap: 'break-word'\n              },\n              children: /*#__PURE__*/_jsxDEV(TYPE.blue, {\n                fontWeight: 500,\n                children: nameOrAddress(proposalData === null || proposalData === void 0 ? void 0 : proposalData.proposer, allIdentities)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProposalDetails, \"KuAe+YxeKu7D7rPtnwnCZz+bSyk=\", false, function () {\n  return [useActiveWeb3React, useDispatch, useActiveProtocol, useProposalData, useProposalStatus, useCurrentBlockTimestamp, useBlockNumber, useAllIdentities, useToggleModal, useModalOpen, useToggleModal, useUserVotes];\n});\n\n_c8 = ProposalDetails;\nexport default _c9 = withRouter(ProposalDetails);\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9;\n\n$RefreshReg$(_c, \"Wrapper\");\n$RefreshReg$(_c2, \"ProposalInfo\");\n$RefreshReg$(_c3, \"ArrowWrapper\");\n$RefreshReg$(_c4, \"CardWrapper\");\n$RefreshReg$(_c5, \"DetailText\");\n$RefreshReg$(_c6, \"MarkDownWrapper\");\n$RefreshReg$(_c7, \"AddressWrapper\");\n$RefreshReg$(_c8, \"ProposalDetails\");\n$RefreshReg$(_c9, \"%default%\");","map":{"version":3,"sources":["/Users/safahi/Documents/GitHub/sybil-interf/src/components/governance/ProposalDetails.tsx"],"names":["React","useEffect","useState","styled","useProposalData","useActiveProtocol","useProposalStatus","useUserVotes","ReactMarkdown","RowBetween","RowFixed","AutoColumn","TYPE","ExternalLink","ChevronRight","ProposalStatus","DateTime","AVERAGE_BLOCK_TIME_IN_SECS","BIG_INT_ZERO","isAddress","getEtherscanLink","useActiveWeb3React","VoterList","VoteModal","withRouter","BodyWrapper","useDispatch","SUPPORTED_PROTOCOLS","useCurrentBlockTimestamp","ApplicationModal","useBlockNumber","useModalOpen","useToggleModal","BigNumber","nameOrAddress","useAllIdentities","ButtonError","Wrapper","div","ProposalInfo","ArrowWrapper","theme","text1","CardWrapper","mediaWidth","upToSmall","CardSection","disabled","DetailText","MarkDownWrapper","AddressWrapper","ProposalDetails","match","params","protocolID","proposalID","history","chainId","dispatch","setActiveProtocol","Object","keys","includes","proposalData","status","currentTimestamp","currentBlock","endDate","fromSeconds","add","from","mul","endBlock","toNumber","undefined","now","local","totalVotes","forCount","againstCount","forPercentage","toFixed","againstPercentage","allIdentities","linkIfAddress","content","support","setSupport","toggleVoteModal","VOTE","voteModalOpen","voteModelToggle","userAvailableVotes","showVotingButtons","greaterThan","title","width","alignItems","length","push","goBack","marginBottom","toLocaleString","DATETIME_FULL","forVotes","slice","Math","min","id","againstVotes","flexGrow","fontSize","padding","details","map","d","i","target","functionSig","callData","split","description","proposer","wordWrap"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport { useProposalData, useActiveProtocol, useProposalStatus, useUserVotes } from '../../state/governance/hooks'\nimport ReactMarkdown from 'react-markdown'\nimport { RowBetween, RowFixed } from '../Row'\nimport { AutoColumn } from '../Column'\nimport { TYPE, ExternalLink } from '../../theme'\nimport { ChevronRight } from 'react-feather'\nimport { ProposalStatus } from './styled'\nimport { DateTime } from 'luxon'\nimport { AVERAGE_BLOCK_TIME_IN_SECS, BIG_INT_ZERO } from '../../constants'\nimport { isAddress, getEtherscanLink } from '../../utils'\nimport { useActiveWeb3React } from '../../hooks'\nimport VoterList from './VoterList'\nimport VoteModal from '../vote/VoteModal'\nimport { RouteComponentProps, withRouter } from 'react-router-dom'\nimport { BodyWrapper } from '../../pages/AppBody'\nimport { useDispatch } from 'react-redux'\nimport { AppDispatch } from '../../state'\nimport { SUPPORTED_PROTOCOLS } from '../../state/governance/reducer'\nimport useCurrentBlockTimestamp from '../../hooks/useCurrentBlockTimestamp'\nimport { ApplicationModal } from '../../state/application/actions'\nimport { useBlockNumber, useModalOpen, useToggleModal } from '../../state/application/hooks'\nimport { BigNumber } from 'ethers'\nimport { nameOrAddress } from '../../utils/getName'\nimport { useAllIdentities } from '../../state/social/hooks'\nimport { ButtonError } from '../../components/Button'\n\nconst Wrapper = styled.div<{ backgroundColor?: string }>``\n\nconst ProposalInfo = styled(AutoColumn)`\n  border-radius: 12px;\n  position: relative;\n`\n\nconst ArrowWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: ${({ theme }) => theme.text1};\n\n  a {\n    color: ${({ theme }) => theme.text1};\n    text-decoration: none;\n  }\n  :hover {\n    text-decoration: none;\n    cursor: pointer;\n  }\n`\nconst CardWrapper = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n  width: 100%;\n\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    grid-template-columns: 1fr;\n    margin: 0;\n    padding: 0;\n  `};\n`\n\nexport const CardSection = styled(AutoColumn)<{ disabled?: boolean }>`\n  padding: 1rem;\n  z-index: 1;\n  opacity: ${({ disabled }) => disabled && '0.4'};\n`\n\nconst DetailText = styled.div`\n  word-break: break-all;\n`\n\nconst MarkDownWrapper = styled.div`\n  overflow: scroll;\n\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    max-width: 400px;\n  `};\n`\n\nconst AddressWrapper = styled.div`\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    max-width: 300px;\n  `};\n`\n\nfunction ProposalDetails({\n  match: {\n    params: { protocolID, proposalID },\n  },\n  history,\n}: RouteComponentProps<{ protocolID: string; proposalID: string }>) {\n  const { chainId } = useActiveWeb3React()\n\n  // if valid protocol id passed in, update global active protocol\n  const dispatch = useDispatch<AppDispatch>()\n  const [, setActiveProtocol] = useActiveProtocol()\n  useEffect(() => {\n    if (protocolID && Object.keys(SUPPORTED_PROTOCOLS).includes(protocolID)) {\n      setActiveProtocol(SUPPORTED_PROTOCOLS[protocolID])\n    }\n  }, [dispatch, protocolID, setActiveProtocol])\n\n  const proposalData = useProposalData(proposalID)\n  const status = useProposalStatus(proposalID) // @TODO shoudlnt use spearate data for this\n\n  // get and format data\n  const currentTimestamp = useCurrentBlockTimestamp()\n  const currentBlock = useBlockNumber()\n  const endDate: DateTime | undefined =\n    proposalData && currentTimestamp && currentBlock\n      ? DateTime.fromSeconds(\n          currentTimestamp\n            .add(BigNumber.from(AVERAGE_BLOCK_TIME_IN_SECS).mul(BigNumber.from(proposalData.endBlock - currentBlock)))\n            .toNumber()\n        )\n      : undefined\n  const now: DateTime = DateTime.local()\n\n  // get total votes and format percentages for UI\n  const totalVotes: number | undefined =\n    proposalData?.forCount !== undefined && proposalData?.againstCount !== undefined\n      ? proposalData.forCount + proposalData.againstCount\n      : undefined\n\n  const forPercentage: string =\n    proposalData?.forCount !== undefined && totalVotes\n      ? ((proposalData.forCount * 100) / totalVotes).toFixed(0) + '%'\n      : '0%'\n\n  const againstPercentage: string =\n    proposalData?.againstCount !== undefined && totalVotes\n      ? ((proposalData.againstCount * 100) / totalVotes).toFixed(0) + '%'\n      : '0%'\n\n  const [allIdentities] = useAllIdentities()\n\n  // show links in propsoal details if content is an address\n  const linkIfAddress = (content: string) => {\n    if (isAddress(content) && chainId) {\n      return (\n        <ExternalLink href={getEtherscanLink(chainId, content, 'address')}>\n          {nameOrAddress(content, allIdentities)}\n        </ExternalLink>\n      )\n    }\n    return <span>{nameOrAddress(content, allIdentities)}</span>\n  }\n  const [support, setSupport] = useState(false)\n  const toggleVoteModal = useToggleModal(ApplicationModal.VOTE)\n  const voteModalOpen = useModalOpen(ApplicationModal.VOTE)\n  const voteModelToggle = useToggleModal(ApplicationModal.VOTE)\n\n  const userAvailableVotes = useUserVotes()\n  // only show voting if user has > 0 votes at proposal start block and proposal is active,\n  const showVotingButtons =\n    userAvailableVotes &&\n    userAvailableVotes.greaterThan(BIG_INT_ZERO) &&\n    proposalData &&\n    proposalData.status === 'active'\n\n  return (\n    <BodyWrapper>\n      <VoteModal\n        isOpen={voteModalOpen}\n        onDismiss={voteModelToggle}\n        support={support}\n        proposalId={proposalID}\n        proposalTitle={proposalData?.title}\n      />\n      <Wrapper>\n        <ProposalInfo gap=\"lg\" justify=\"start\">\n          <RowBetween style={{ width: '100%', alignItems: 'flex-start' }}>\n            <RowFixed>\n              <ArrowWrapper\n                onClick={() => {\n                  history?.length === 1 ? history.push('/') : history.goBack()\n                }}\n                style={{ alignItems: 'flex-start' }}\n              >\n                <TYPE.body fontWeight=\"600\">Proposals</TYPE.body>\n              </ArrowWrapper>\n              <ChevronRight size={16} />\n              <TYPE.body>{'Proposal #' + proposalID}</TYPE.body>\n            </RowFixed>\n\n            {proposalData && <ProposalStatus status={status ?? ''}>{status}</ProposalStatus>}\n          </RowBetween>\n          <AutoColumn gap=\"10px\" style={{ width: '100%' }}>\n            <TYPE.largeHeader style={{ marginBottom: '.5rem' }}>{proposalData?.title}</TYPE.largeHeader>\n            <RowBetween>\n              <TYPE.main>\n                {endDate && endDate < now\n                  ? 'Voting ended ' + (endDate && endDate.toLocaleString(DateTime.DATETIME_FULL))\n                  : proposalData\n                  ? 'Voting ends approximately ' + (endDate && endDate.toLocaleString(DateTime.DATETIME_FULL))\n                  : ''}\n              </TYPE.main>\n            </RowBetween>\n          </AutoColumn>\n          <CardWrapper>\n            {proposalData && (\n              <>\n                <VoterList\n                  title=\"For\"\n                  amount={proposalData?.forCount}\n                  percentage={forPercentage}\n                  voters={proposalData?.forVotes.slice(0, Math.min(10, Object.keys(proposalData?.forVotes)?.length))}\n                  support=\"for\"\n                  id={proposalData?.id}\n                />\n                <VoterList\n                  title=\"Against\"\n                  amount={proposalData?.againstCount}\n                  percentage={againstPercentage}\n                  voters={proposalData?.againstVotes.slice(\n                    0,\n                    Math.min(10, Object.keys(proposalData?.againstVotes)?.length)\n                  )}\n                  support={'against'}\n                  id={proposalData?.id}\n                />\n              </>\n            )}\n            {showVotingButtons && (\n              <>\n                <ButtonError\n                  style={{ flexGrow: 1, fontSize: 16, padding: '8px 12px', width: 'unset' }}\n                  onClick={() => {\n                    setSupport(true)\n                    toggleVoteModal()\n                  }}\n                >\n                  Support Proposal\n                </ButtonError>\n                <ButtonError\n                  error\n                  style={{ flexGrow: 1, fontSize: 16, padding: '8px 12px', width: 'unset' }}\n                  onClick={() => {\n                    setSupport(false)\n                    toggleVoteModal()\n                  }}\n                >\n                  Reject Proposal\n                </ButtonError>\n              </>\n            )}\n          </CardWrapper>\n          <AutoColumn gap=\"md\">\n            <TYPE.mediumHeader fontWeight={600}>Details</TYPE.mediumHeader>\n            {proposalData?.details?.map((d, i) => {\n              return (\n                <DetailText key={i}>\n                  {i + 1}: {linkIfAddress(d.target)}.{d.functionSig}(\n                  {d.callData.split(',').map((content, i) => {\n                    return (\n                      <span key={i}>\n                        {linkIfAddress(content)}\n                        {d.callData.split(',').length - 1 === i ? '' : ','}\n                      </span>\n                    )\n                  })}\n                  )\n                </DetailText>\n              )\n            })}\n          </AutoColumn>\n          <AutoColumn gap=\"md\">\n            <MarkDownWrapper>\n              <ReactMarkdown source={proposalData?.description} disallowedTypes={['code']} />\n            </MarkDownWrapper>\n          </AutoColumn>\n          <AutoColumn gap=\"md\">\n            <TYPE.mediumHeader fontWeight={600}>Proposer</TYPE.mediumHeader>\n            <AddressWrapper>\n              <ExternalLink\n                href={\n                  proposalData?.proposer && chainId ? getEtherscanLink(chainId, proposalData?.proposer, 'address') : ''\n                }\n                style={{ wordWrap: 'break-word' }}\n              >\n                <TYPE.blue fontWeight={500}>{nameOrAddress(proposalData?.proposer, allIdentities)}</TYPE.blue>\n              </ExternalLink>\n            </AddressWrapper>\n          </AutoColumn>\n        </ProposalInfo>\n      </Wrapper>\n    </BodyWrapper>\n  )\n}\n\nexport default withRouter(ProposalDetails)\n"]},"metadata":{},"sourceType":"module"}